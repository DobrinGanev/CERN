{"version":3,"sources":["webpack:///../src/server.js?22b7","webpack:///../cassandra/common/cassandra.js?7b8a","webpack:///../config.js?2315"],"names":[],"mappings":"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","file":"0.3300ca51200531bb977b.hot-update.js","sourcesContent":["import express from 'express'\r\nimport babelPolyfill from \"babel-polyfill\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom/server\";\r\nimport { RouterContext, match,createMemoryHistory } from \"react-router\";\r\nimport configureStore from \"./store.js\";\r\nimport { Provider } from 'react-redux';\r\nimport routesContainer from \"./routes\";\r\nimport url from \"url\";\r\nimport serverConfig from '../config';\r\nlet routes = routesContainer;\r\n\r\nconst server = express()\r\nserver.listen(serverConfig.port, (error) => {\r\n  if (!error) {\r\n    console.log(`CERN is running on port: ${serverConfig.port}! Build something disruptive!`); // eslint-disable-line\r\n  }\r\n});\r\n\r\nvar cassandra = require('cassandra-driver');\r\nvar client = new cassandra.Client({ contactPoints: ['127.0.0.1']});\r\n/*\r\nSample schema\r\nhttps://github.com/pmcfadin/cassandra-videodb-sample-schema\r\n*/\r\nrequire(\"../cassandra/videodb-schema\")(client);\r\n\r\n//test\r\nserver.get('/hello', function (req, res) {\r\n  var data = [];\r\n  data.push({\r\n    message: \"Updated message from server: Hello world from  the server\"\r\n  })\r\n  //for effect to see the update of the state\r\n  setTimeout(function () {\r\n    res.send(data);\r\n  }, 3000)\r\n\r\n});\r\n\r\nvar envset = {\r\n  production: process.env.NODE_ENV === 'production'\r\n};\r\nconst hostname = envset.production ? (process.env.HOSTNAME || process['env'].HOSTNAME) : \"localhost\";\r\n\r\n/**\r\n * Create Redux store, and get intitial state.\r\n */\r\nconst store = configureStore();\r\nconst initialState = store.getState();\r\nserver.use(function(req, res, next) {\r\n  match({routes, location: req.url}, (error, redirectLocation, renderProps) => {\r\n    if (redirectLocation) {\r\n      res.redirect(redirectLocation.pathname + redirectLocation.search);\r\n      return;\r\n    }\r\n    if (error || !renderProps) {\r\n      next();\r\n      return;\r\n    }\r\n\tconst reactString = ReactDOM.renderToString(\r\n\t\t<Provider store={store}>\r\n      <RouterContext {...renderProps} />\r\n\t\t</Provider>\r\n\t);\r\n\tconst webserver = __PRODUCTION__ ? \"\" : `//${hostname}:8080`;\r\n\tlet output = (\r\n\t\t`<!doctype html>\r\n\t\t<html lang=\"en-us\">\r\n\t\t\t<head>\r\n\t\t\t\t<meta charset=\"utf-8\">\r\n\t\t\t\t<title></title>\r\n\t\t\t</head>\r\n\t\t\t<body>\r\n\t\t\t\t<div id=\"react-root\">${reactString}</div>\r\n\t\t\t\t<script>\r\n\t\t\t\t\twindow.__INITIAL_STATE__ = ${JSON.stringify(initialState)}\r\n\t\t\t\t</script>\r\n\t\t\t\t<script src=${webserver}/dist/client.js></script>\r\n\t\t\t</body>\r\n\t\t</html>`\r\n\t\t);\r\n    res.send(output);\r\n  });\r\n});\r\n\r\nif (__DEV__) {\r\n\tif (module.hot) {\r\n\t\tconsole.log(\"[HMR] Waiting for server-side updates\");\r\n\r\n\t\tmodule.hot.accept(\"./routes\", () => {\r\n\t\t\troutes = require(\"./routes\");\r\n\t\t});\r\n\r\n\t\tmodule.hot.addStatusHandler((status) => {\r\n\t\t\tif (status === \"abort\") {\r\n\t\t\t\tsetTimeout(() => process.exit(0), 0);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/server.js\n **/","import { Client } from 'cassandra-driver';\nimport Promise from 'bluebird';\nvar serverConfig =  require(\"../../config\")\n\n//https://github.com/KillrVideo/killrvideo-nodejs\nexport const cassandra = Promise.promisifyAll(\n  new Client({\n    contactPoints: serverConfig.CASSANDRA_CONTACT_POINTS,\n    queryOptions: {\n      prepare: true\n    }\n  })\n);\n\n\n\n/** WEBPACK FOOTER **\n ** ../cassandra/common/cassandra.js\n **/","const config = {\n  contactPoints: process.env.CASSANDRA_CONTACT_POINTS || ['127.0.0.1'],\n  port: process.env.PORT || 3000\n};\n\nexport default config;\n\n\n\n/** WEBPACK FOOTER **\n ** ../config.js\n **/"],"sourceRoot":""}